import { vi } from 'vitest';
import * as actualFs from 'fs';

// Mock existsSync to return true by default
export const existsSync = vi.fn((path: actualFs.PathLike) => {
  return actualFs.existsSync(path);
});

// Re-export everything from the actual fs module
export const {
  accessSync,
  appendFileSync,
  chmodSync,
  chownSync,
  closeSync,
  copyFileSync,
  cpSync,
  createReadStream,
  createWriteStream,
  fchmodSync,
  fchownSync,
  fdatasyncSync,
  fstatSync,
  fsyncSync,
  ftruncateSync,
  futimesSync,
  lchmodSync,
  lchownSync,
  linkSync,
  lstatSync,
  lutimesSync,
  mkdirSync,
  mkdtempSync,
  openSync,
  opendirSync,
  readFileSync,
  readSync,
  readdirSync,
  readlinkSync,
  realpathSync,
  renameSync,
  rmdirSync,
  rmSync,
  statSync,
  symlinkSync,
  truncateSync,
  unlinkSync,
  utimesSync,
  writeFileSync,
  writeSync,
  watch,
  watchFile,
  unwatchFile,
  promises,
  constants,
  Stats,
  Dirent,
  ReadStream,
  WriteStream,
  Dir,
  access,
  appendFile,
  chmod,
  chown,
  close,
  copyFile,
  cp,
  fchmod,
  fchown,
  fdatasync,
  fstat,
  fsync,
  ftruncate,
  futimes,
  lchmod,
  lchown,
  link,
  lstat,
  lutimes,
  mkdir,
  mkdtemp,
  open,
  opendir,
  read,
  readdir,
  readFile,
  readlink,
  realpath,
  rename,
  rm,
  rmdir,
  stat,
  symlink,
  truncate,
  unlink,
  utimes,
  write,
  writev,
  readv,
} = actualFs;

// Override existsSync with our mock
export default {
  ...actualFs,
  existsSync,
};
